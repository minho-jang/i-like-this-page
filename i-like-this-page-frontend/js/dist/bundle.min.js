(()=>{"use strict";const e="http://3.36.69.100:8080/api/v1",t=e=>{const t=document.createElement("span");t.setAttribute("id","iltp-box");const o=`\n    border-radius: 15%;\n    background-color: ${e?"rgb(255, 202, 202)":"rgb(214, 214, 214)"};\n    font-family: 'Fira Sans', sans-serif;\n    padding: 0.5rem 1rem;`;t.setAttribute("style",o);const s=document.createElement("span");s.setAttribute("id","iltp-content-icon"),s.innerText=e?"ðŸ’•":"ðŸ–¤",t.appendChild(s);const i=document.createElement("span");i.setAttribute("id","iltp-content-number"),i.setAttribute("style","margin-left: .4rem;"),i.innerText=e?"0":"ERROR",t.appendChild(i),n(),r.appendChild(t);const c=document.createElement("link");c.setAttribute("href","css/i-like-this-page.css"),c.setAttribute("type","text/css"),c.setAttribute("rel","stylesheet"),document.head.appendChild(c)},n=()=>{r.childNodes.length>0&&r.removeChild(r.childNodes[0])};let o=!1;const r=document.getElementById("i-like-this-page");r.setAttribute("style","\n  cursor: pointer;\n"),r.addEventListener("click",(function(){const e=window.location.host+window.location.pathname;o?i(e):s(e)}));const s=t=>{(t=>{const n=`${e}/like`,o={method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({url:t})};return fetch(n,o).then((e=>e.json()))})(t).then((e=>{console.log(e),e.success?(o=e.response.urlLike,document.getElementById("iltp-content-number").innerText=e.response.likeCount):c(e.error)})).catch((e=>c(e)))},i=t=>{(t=>{const n=`${e}/like`,o={method:"DELETE",headers:{"Content-Type":"application/json"},body:JSON.stringify({url:t})};return fetch(n,o).then((e=>e.json()))})(t).then((e=>{console.log(e),e.success?(o=e.response.urlLike,document.getElementById("iltp-content-number").innerText=e.response.likeCount):c(e.error)})).catch((e=>c(e)))},c=e=>{console.error(e),t(!1)};t(!0),window.addEventListener("load",(()=>{(t=>{(t=>{const n=new URL(`${e}/like`),o={url:t};return n.search=new URLSearchParams(o).toString(),fetch(n).then((e=>e.json()))})(t).then((e=>{if(!e.success)return console.error(e.error.message),void renderErrorButtonTo(r,e.error.status);console.log(e),o=e.response.urlLike,document.getElementById("iltp-content-number").innerHTML=e.response.likeCount})).catch((e=>c(e)))})(window.location.host+window.location.pathname)}))})();